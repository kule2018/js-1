<!DOCTYPE html>
<html>
    <head>
        <!--<script type="text/javascript" src="http://100.84.47.149:9999/target/target-script-min.js#anonymous"></script>-->
        <title>test</title>
        <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
        <style type="text/css">
            body {
                line-height: 1.5;
            }

            .cmt_item {
                max-height: 3em;
                overflow: hidden;
                margin: 40px 0;
            }

            .view_all {
                display: none;
                background: linear-gradient(to right, rgba(255, 255, 255, 0.5) 0%, #fff 20px);
                padding-left: 20px;
                color: #59f;
            }

            .expandable {
                position: relative;
            }

            .expandable .view_all {
                display: inline;
                position: absolute;
                right: 0;
                bottom: 0;
            }

            .expanded {
                max-height: none;
            }

            .expanded .view_all {
                display: none;
            }
        </style>
    </head>
    <body>

        <div class="cmt_item">
            一潭死水臭熏天，腐女庸男荡里边。<br />
            只肯自家谋福利，不为万户借方便。<br />
            望财易把婪心起，观色难将泄欲填。<br />
            送走红蝇来黑鼠，案头尽是鹤翩翩
            <a class="view_all">查看全部</a>
        </div>

        <div class="cmt_item">
            这一伟大胜利，开辟了中华民族伟大复兴的光明前景，开启了古老中国凤凰涅槃、浴火重生的新征程。
            <a class="view_all">查看全部</a>
        </div>

        <div class="cmt_item">
            厂前明月光<br />
            透过半裂窗<br />
            十年尽沧桑<br />
            低头暝思想<br />
            地产是正纲<br />
            实业不兴帮！
            <a class="view_all">查看全部</a>
        </div>

        <div class="cmt_item">
            某女被怀疑从事淫秽色情交易被警察盘问：那个男的是谁？<br />
            答：干爹<br />
            问：你经济来源？<br />
            答：干爹<br />
            问：你的工作？<br />
            答：干爹<br />
            警察大怒问：你还会别的吗？<br />
            答：找干爹<br />
            <a class="view_all">查看全部</a>
        </div>

        <div class="cmt_item">
            中国人民抗日战争胜利，是近代以来中国抗击外敌入侵的第一次完全胜利。
            <a class="view_all">查看全部</a>
        </div>

        <div class="cmt_item">
            中国人民抗日战争胜利，是近代以来中国抗击外敌入侵的第一次完全胜利。<br>
            这一伟大胜利，彻底粉碎了日本军国主义殖民奴役中国的图谋，洗刷了近代以来中国抗击外来侵略屡战屡败的民族耻辱。
            <a class="view_all">查看全部</a>
        </div>

        <script type="text/javascript" src="https://soneway.github.io/jq/jq.js"></script>
        <!--<script type="text/javascript" src="http://umsfrontend.test2.uae.uc.cn/sdk/uploader-develop-0.0.0-1.js"></script>-->
        <script type="text/javascript">
            function setScroll() {
                $('.cmt_item').each(function () {
                    var $this = $(this);
                    this.scrollHeight > this.clientHeight ? $this.addClass('expandable') : $this.removeClass('expandable');
                });
            }

            $(document).on('click', '.cmt_item', function (evt) {
                if ($(evt.target).closest('.view_all').length) {
                    $(this).addClass('expanded');
                }
            });

            $(window).on('resize', function () {
                setScroll();
            }).trigger('resize');
        </script>
    </body>
</html>