<!DOCTYPE html>
<html>
    <head>
        <title>perf test</title>
        <style type="text/css">
            body {
                font-size: 12px;
            }

            input, button, textarea {
                vertical-align: middle;
            }

            textarea {
                width: 30%;
                height: 400px;
                max-width: 300px;
            }

            #msg {
                white-space: pre-wrap;
            }

            #lib_chk {
                padding: 10px 0;
            }

            #lib_chk input {
                margin: 0 5px 0 15px;
            }

            #lib_chk input:first-of-type {
                margin-left: 0;
            }

            .loadjs_wrap {
                padding-bottom: 10px;
            }

            #txt_js {
                width: 60%;
                max-width: 400px;
            }

            #txt_count {
                width: 200px;
            }
        </style>
        <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
    </head>
    <body>
        <!--测试DOM-->
        <div style="display: none;">
            <!--mainbox-->
            <div id="mainbox" class="absolute transform">

                <!--loading-->
                <div id="loading" class="btn-offsidebox absolute">
                    <div>
                        <div class="spinner">
                            <b></b><b></b><b></b><b></b><b></b><b></b><b></b><b></b>
                        </div>
                        <p>正在加载...</p>
                    </div>
                </div>
                <!--loading end-->

                <!--头部-->
                <div id="header" class="head transform">

                    <!--一级面板标题-->
                    <div class="roottitle">
                        <a class="btnleft" href="#panelshare">分享</a>
                        <h1 class="title"></h1>
                    </div>
                    <!--一级面板标题 end-->

                    <!--二级面板标题-->
                    <div class="subtitle">
                        <a id="btn-goback" class="btnleft btnback transition icon-left">返回</a>
                        <h1 class="title"></h1>
                    </div>
                    <!--二级面板标题 end-->

                    <a class="btnright btn-onsidebox icon-menu"></a>

                </div>
                <!--头部 end-->


                <!--一级面板-->

                <!--首页-->
                <div id="panel1" class="panel" title="首页" data-role="root">
                    <div class="indexbox indexbg">
                        <p class="center">
                            <a class="to_join" data-hash="#paneljoin" data-need="login"></a>
                        </p>
                        <p class="hqzl">
                            <a class="to_hqzl" href="http://www.worldcruisechina.com/" target="_blank"></a>
                        </p>
                        <div class="actrole bgborder">
                            <h2>活动规则：</h2>
                            <!--<p>全新凯美瑞环游团环游世界86天已经于3月1日起航啦，来自搜狐的6位自媒体人将会在自己的旅途中，为幸运网友实现一个心愿！你想让世界小姐叶子金替你带一份礼物吗？让楮乔给你异国的TA唱一首歌？或是让美食家韩伟请你的海外死党美餐一顿？没问题！赶紧许下你的心愿，不论是奇葩的、新奇的、有趣的还是感人的心愿，都有可能被选中实现哦！</p>-->

                            <h3>活动时间：</h3>
                            即日起-2014年5月19日

                            <h3>参与方式：</h3>
                            <h4>一、 许愿有奖</h4>
                            1. 登录本专题；<br />
                            2. 在活动页面选择/填写个人梦想；<br />
                            3. 选择一位<a href="#paneldreamer">圆梦大使</a>；<br />
                            4. 提交作品并分享；<br />
                            5. 参加转盘抽奖。<br />
                            ● 全新凯美瑞环游团，将从所有征集到的愿望中随机选取有意思的愿望，在环游世界的旅途中，在异国他乡尽其所能地为您实现梦想！<br />
                            ● 提交梦想后，别忘了在补填资料中留下您的梦想明细哦，比如TA的联系方式~；您的愿望一旦被选中，这些信息将帮助我们的圆梦大使为您实现梦想；主办方会为您严格保密此部分信息。<br />
                            ● “为可能 尽所能”跟搜狐自媒体人环游世界86天
                            <a data-href="http://3g.k.sohu.com/t/h460049">【了解详情】</a>
                            <h4>二、 分享有奖</h4>
                            1. 登录本专题；<br />
                            2. 分享梦想作品；<br />
                            3. 参加转盘抽奖。
                            <h4>三、有奖试驾</h4>
                            1. 除了提交愿望或者分享愿望作品，您还可以在“补填资料“或“有奖试驾”对话框中预约试驾全新凯美瑞，完成试驾信息填写的用户，均可参加试驾豪礼大抽奖。<br />
                            2. 主办方将于5月21日进行抽奖，并在5月25日前公布获奖名单。<br />
                            3. 每个手机号只能预约一次试驾，试驾信息提交后不能修改，请注意填写正确信息哦！
                            <h4>四、抽奖规则：</h4>
                            1、 用户只有在登录状态下参与互动，才能获得抽奖机会；<br />
                            2、 上传一个愿望，获得3次转盘抽奖机会；单独分享愿望作品一次，获得1次转盘抽奖机会；每个账号每天最高获得15次转盘抽奖机会；<br />
                            3、 活动奖品：<br />
                            <table class="center">
                                <tr>
                                    <th>奖品类别</th>
                                    <th>奖品设置</th>
                                    <th>奖品数量</th>
                                </tr>
                                <tr>
                                    <td rowspan="2">试驾豪礼</td>
                                    <td>iPadmini 3</td>
                                    <td>1</td>
                                </tr>
                                <tr>
                                    <td>500元京东电子购物卡</td>
                                    <td>10</td>
                                </tr>
                                <tr>
                                    <td rowspan="4">转盘抽奖</td>
                                    <td>100元手机充值话费</td>
                                    <td>30</td>
                                </tr>
                                <tr>
                                    <td>50元手机充值话费</td>
                                    <td>30</td>
                                </tr>
                                <tr>
                                    <td>小狐狸公仔一只</td>
                                    <td>50</td>
                                </tr>
                                <tr>
                                    <td>活动定制T恤一件</td>
                                    <td>50</td>
                                </tr>
                            </table>
                            （1）、所有奖品将于活动结束后统一派发。<br />
                            （2）、中奖信息会以网站公告的方式告知，请活动参与者密切关注活动网站。请获奖用户填写完整的个人信息，以确保奖品能准确送达；个人信息一旦提交，不可修改；若因用户资料填写不全或不正确，而导致奖品无法成功送达，视为自动放弃获奖机会，主办方不再补发礼品。<br />
                            （3）、100元及以上价值礼品，需凭身份证复印件（或扫描件/电子照片）领奖，身份证信息需与登记的个人信息吻合，否则视为自动放弃获奖机会。<br />
                            （4）、电子购物卡及手机话费充值等奖品，若在采购过程中遇到缺货等情况，将采用同类等值礼品替代。

                            <h3>活动声明：</h3>
                            1、本活动的主办方为　广汽丰田汽车有限公司（以下统一简称活动“主办方”），搜狐网为本活动的主办合作媒体。<br />
                            2、主办方及搜狐网保留对本次活动所有作品（文字、照片、视频等）的出版权，用于印刷，广播，电子媒体或其他媒体，而不需要经过参赛者的许可，或支付参赛者任何费用。<br />
                            3、主办方有权取消和删除任何违反规则、条例或侵犯版权的个人作品。<br />
                            4、主办方将不承担任何由参赛者引起的侵犯版权或其它法律纠纷，并有权在需要时修改活动阶段，奖品及其规则，恕不另行通知。<br />
                            5、所有用户参与活动时不得发布危害国家安全、泄露国家秘密的言论，不得侵犯国家、社会、集体和公民的合法权益，不得发布国家法律法规明令禁止的内容，如因留言导致任何法律纠纷，主办方及搜狐网均不承担责任。<br />
                            6、主办方有权力在不通知用户的前提下删除违反、侵权、诽谤、不道德的言论。<br />
                            7、如发现用户在活动中使用任何不正当手段参与活动，主办方有权不通知用户直接取消用户任何获奖资格。<br />
                            8、所有活动参赛者视为接受上述规则和条例。<br />
                            9、在法律允许的范围内，主办方对本次活动拥有最终解释权和决策权。
                        </div>
                    </div>
                </div>
                <!--首页 end-->

                <!--参与活动-->
                <div id="paneljoin" class="panel indexbg" title="参与活动" data-role="root">
                    <div class="joinbox bgborder center maxwidth">
                        <h2>1.选择你的愿望</h2>
                        <select id="wish">
                        </select>
                        <input type="text" id="txt_wish" placeholder="请输入更奇妙更赞的想法" />
                        <h2>2.选择你的圆梦大使</h2>
                        <div class="carousel">
                        </div>
                        <a id="btn_join" class="btn">确定提交</a>
                    </div>
                </div>
                <!--参与活动 end-->

                <!--有奖试驾-->
                <div id="panelregister" class="panel panelbg" title="有奖试驾" data-role="root">
                    <div class="registerbox bgborder center maxwidth">
                        <p>
                            即日起-5月19日,登记试驾信息,<br />
                            有机会赢取iPadmini3 及 电商购物卡哦!<br />
                            (活动详情请见 首页 [活动规则])
                        </p>
                        <table class="form_tb">
                            <tr>
                                <th>*姓名</th>
                                <td>
                                    <input type="text" data-field="name" class="notnull" data-msg="姓名" placeholder="请输入姓名" />
                                </td>
                            </tr>
                            <tr>
                                <th>*手机</th>
                                <td>
                                    <input type="tel" data-field="tel" class="notnull" data-msg="手机号码" placeholder="请输入手机号码" />
                                    <input type="hidden" data-field="remark" />
                                </td>
                            </tr>
                            <tr>
                                <th>*省份</th>
                                <td>
                                    <select id="province" data-field="province" class="notnull" data-msg="省份"></select>
                                </td>
                            </tr>
                            <tr>
                                <th>*城市</th>
                                <td>
                                    <select id="city" data-field="city" class="notnull" data-msg="城市"></select>
                                </td>
                            </tr>
                            <tr>
                                <th>*经销商</th>
                                <td>
                                    <select id="dealer" data-field="dealer" class="notnull" data-msg="经销商"></select>
                                </td>
                            </tr>
                        </table>
                        <a id="btn_register" class="btn">确定提交</a>
                    </div>
                </div>
                <!--有奖试驾 end-->

                <!--愿望列表-->
                <div id="paneljoinlist" class="panel panelbg" title="愿望列表" data-role="root">
                    <div id="joinlist_ctrl" class="center ctrl">
                        <div class="ctrlbox">
                            <div class="ctrllist">
                            </div>
                        </div>
                    </div>
                    <div class="center content">
                        <div id="joinlist"></div>
                        <a id="joinlist_more">点击加载更多</a>
                    </div>
                </div>
                <!--愿望列表 end-->

                <!--转盘抽奖-->
                <div id="panellottery" class="panel radialbg" title="转盘抽奖" data-role="root">
                    <div id="turntable">
                        <div id="ttpointer"></div>
                        <a id="ttstart"></a>
                    </div>
                    <p>我的抽奖次数：<b id="lottery_time">loading...</b></p>
                </div>
                <!--转盘抽奖 end-->

                <!--圆梦大使-->
                <div id="paneldreamer" class="panel panelbg" title="圆梦大使" data-role="root">
                    <div class="carousel">
                        <div class="item">
                            <div class="bgborder maxwidth">
                                <h2>美食家 韩伟</h2>

                                <h3>《美食圈》主编， 《带好胃口去旅行》作者。通晓中西方美食，旅行经验丰富，能写能拍能出镜 。</h3>

                                <p>
                                    生活的目的不是为了旅行，<br />
                                    旅行的目的也不是为了吃，<br />
                                    是的，你看到的应该不只是一盘食物。<br />
                                    我相信，食物代表名俗，吃饭是一种文化；<br />
                                    跟着我，用味觉感知世界！
                                </p>
                            </div>
                        </div>
                        <div class="item">
                            <div class="bgborder maxwidth">
                                <h2>作家 土摩托</h2>

                                <h3>三联生活周刊特约撰稿人，平淡旅途中发现趣事，代表作《土摩托看世界》。</h3>

                                <p>
                                    我知道船的样子；<br />
                                    我知道海的样子；<br />
                                    我知道港口的样子；<br />
                                    我知道海滨城市的样子。<br />
                                    但土摩托看世界，<br />
                                    从来不止于眼所能及的风景，<br />
                                    尽所能去发现真正动人的人和故事，<br />
                                    这才是我的世界观！
                                </p>
                            </div>
                        </div>
                        <div class="item">
                            <div class="bgborder maxwidth">
                                <h2>摄影师 王源宗</h2>

                                <h3>90后自由风光摄影师、延时摄影师、航拍摄影师、水下摄影师、纪录片导演。<br />
                                    代表作《西藏星空》《环球旅行-美国篇》。
                                </h3>

                                <p>
                                    一个人一年，不算什么；<br />
                                    草原遇到狼，也不算什么；<br />
                                    只要风在，景在，时间再，我就会在。<br />
                                    我是90后王源宗，<br />
                                    为了那些奇妙的影像，<br />
                                    我愿意尽我一切所能！
                                </p>
                            </div>
                        </div>
                        <div class="item">
                            <div class="bgborder maxwidth">
                                <h2>2013环球小姐中国区冠军 叶子金</h2>

                                <h3>长得好看还有摄影才华，擅即兴创作，有强烈的个人艺术风格。</h3>

                                <p>
                                    当我只是一个游客，<br />
                                    我只是一个围观者，<br />
                                    我希望尽我所能变成其中的一员；<br />
                                    我穿上当地的衣裳，做他们做的事，<br />
                                    吃他们做的食物，过他们的生活，<br />
                                    感受他们的信仰和文化……<br />
                                    这是我想要的身与心的旅行。
                                </p>
                            </div>
                        </div>
                        <div class="item">
                            <div class="bgborder maxwidth">
                                <h2>歌手 褚乔</h2>

                                <h3>中国好声音，创作歌手，将在环游过程中产生两首环球歌曲。</h3>

                                <p>
                                    有一个中国年轻人想把全世界写成音乐，<br />
                                    他写啊写啊写，<br />
                                    忽然，像泰坦尼克号里的jack一样，<br />
                                    捡到了一张上天恩赐的船票；<br />
                                    现在，<br />
                                    他要尽其所能去收集全球的美妙韵律，<br />
                                    变成声音的日记，分享给你听！
                                </p>
                            </div>
                        </div>
                        <div class="item">
                            <div class="bgborder maxwidth">
                                <h2>旅行家 白鸿</h2>

                                <h3>中国资深旅行顾问。</h3>

                                <p>
                                    对于我，行走即是人生；<br />
                                    走遍40多国，看过万千风景，<br />
                                    环游世界已不仅仅是个梦想；<br />
                                    我的梦想，<br />
                                    带更多的人环游世界。
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <!--圆梦大使 end-->

                <!--获奖名单-->
                <div id="panelwinnerlist" class="panel panelbg" title="获奖名单" data-role="root">
                    <div id="winnerlist" class="bgborder maxwidth">
                        <p>
                            <label class="i0">昵称</label><label class="i1">奖品</label>
                        </p>
                    </div>
                </div>
                <!--获奖名单 end-->

                <!--一级面板 end-->


                <!--二级面板-->

                <!--嵌入的iframe页面-->
                <div id="paneliframe" class="panel">
                </div>
                <!--嵌入的iframe页面 end-->

                <!--补填资料-->
                <div id="panelfilldata" class="panel radialbg" title="补填资料">
                    <div class="filldatabox center maxwidth">
                        <table class="form_tb">
                            <tr>
                                <th>*姓名</th>
                                <td>
                                    <input type="text" data-field="name" class="notnull" data-msg="姓名" placeholder="请输入姓名" />
                                </td>
                            </tr>
                            <tr>
                                <th>*手机</th>
                                <td>
                                    <input type="tel" data-field="tel" class="notnull" data-msg="手机号码" placeholder="请输入手机号码" />
                                </td>
                            </tr>
                            <tr>
                                <th>备注</th>
                                <td>
                            <textarea data-field="remark" data-msg="备注"
                                      placeholder="请在此填写您许愿中的TA的信息或其他需要悄悄告诉我们的话"></textarea>
                                </td>
                            </tr>
                        </table>
                        <p>
                            <input type="checkbox" checked="checked" onclick="return false" />一旦提交，将不能更改，此信息关乎您中奖后派发奖品途径,请谨慎填写，确保无误！
                        </p>
                        <h4 class="center">
                            完善以下试驾信息，<br />
                            有机会赢取iPadmini3 及 电商购物卡哦!<br />
                            (活动详情请见 首页 [活动规则])
                        </h4>
                        <h2 class="center">试驾全新凯美瑞</h2>
                        <table class="form_tb">
                            <tr>
                                <th>省份</th>
                                <td>
                                    <select id="province1" data-field="province" data-msg="省份"></select>
                                </td>
                            </tr>
                            <tr>
                                <th>城市</th>
                                <td>
                                    <select id="city1" data-field="city" data-msg="城市"></select>
                                </td>
                            </tr>
                            <tr>
                                <th>经销商</th>
                                <td>
                                    <select id="dealer1" data-field="dealer" data-msg="经销商"></select>
                                </td>
                            </tr>
                        </table>
                        <a id="btn_filldata" class="btn">确定提交</a>
                    </div>
                </div>
                <!--补填资料 end-->

                <!--愿望详情-->
                <div id="paneljoindetail" class="panel panelbg" title="愿望详情">
                </div>
                <!--愿望详情 end-->

                <!--分享-->
                <div id="panelshare" class="panel indexbg" title="分享">
                    <div class="sharebox center bgborder maxwidth">
                        <h3 id="share_alert"></h3>
                        <input type="hidden" id="url_share" />
                        <input type="hidden" id="pic_share" />
                        <textarea id="txt_share"></textarea>
                        <p id="share_list">
                            <a data-provider="weibosina" class="weibosina"></a>
                            <a data-provider="qq" class="qq"></a>
                            <a data-provider="renren" class="renren"></a>
                            <a data-provider="tieba" class="tieba"></a>
                            <a data-provider="tqq" class="tqq"></a>
                            <a data-provider="douban" class="douban"></a>
                            <a data-provider="kaixin001" class="kaixin001"></a>
                            <a data-provider="163" class="netease"></a>
                        </p>
                    </div>
                </div>
                <!--分享 end-->

                <!--二级面板 end-->


                <!--导航-->
                <div id="navbar" class="transform">
                    <div class="navbox">
                        <div class="navlist">
                            <a href="#panel1">首页</a>
                            <a data-hash="#paneljoin" data-need="login">参与活动</a>
                            <a data-hash="#panelregister" data-need="login">有奖试驾</a>
                            <a href="#paneljoinlist" id="to_joinlist">愿望列表</a>
                            <a data-hash="#panellottery" data-need="login">转盘抽奖</a>
                            <a href="#paneldreamer">圆梦大使</a>
                            <a href="#panelwinnerlist">获奖名单</a>
                            <a data-href="http://3g.k.sohu.com/t/h460049">环球86天</a>
                            <!--<a href="#panelwinnerlist">线下圆梦</a>-->
                            <a href="http://www.gac-toyota.com.cn/minisite/Campaigns/2015/camrylaunch"
                               target="_blank">全新凯美瑞官网</a>
                            <!--<a href="#paneldreamer">全球寻找凯美瑞</a>-->
                        </div>
                    </div>
                </div>
                <!--导航 end-->

            </div>
            <!--mainbox end-->

            <!--sidebox-->
            <div id="sidebox" class="transform">
                <div class="head">
                    <a class="btn-offsidebox btnleft btnback icon-left">关闭</a>
                    <h1 class="title">个人中心</h1>
                </div>
                <div class="content radialbg">

                    <!--未登陆-->
                    <div class="tologin center">
                        <a class="sohulogo"></a>
                        <p class="icon_userid">
                            <input type="text" id="userid" data-msg="用户名" class="notnull" placeholder="请输入用户名" />
                        </p>
                        <p class="icon_password">
                            <input type="password" id="password" data-msg="密码" class="notnull" placeholder="请输入密码" />
                        </p>
                        <a id="btn_login" class="btn">登录</a>
                        <div class="other_login">
                            <p>其他登录方式：</p>
                            <div>
                                <a onclick="jtool.otherLogin('qq')" class="qq"></a>
                                <a onclick="jtool.otherLogin('sina')" class="sina"></a>
                                <a onclick="jtool.otherLogin('renren')" class="renren"></a>
                                <a onclick="jtool.otherLogin('baidu')" class="baidu"></a>
                                <a onclick="jtool.otherLogin('taobao')" class="taobao"></a>
                            </div>
                        </div>
                    </div>
                    <!--未登陆 end-->

                    <!--已登陆-->
                    <div class="logined center">
                        <h2 id="nickname"></h2>
                        <a class="btn btn-offsidebox" href="#paneljoinlist" id="btn_psite">个人主页</a>
                        <a class="btn btn-offsidebox" href="#panelfilldata">补填资料</a>
                        <a class="btn" id="btn_logout">退出</a>
                    </div>
                    <!--已登陆 end-->

                </div>
            </div>
            <!--sidebox end-->
        </div>
        <!--测试DOM end-->

        <div id="lib_chk"></div>

        <div class="loadjs_wrap">
            <input type="text" id="txt_js" placeholder="请输入需要加载的js的路径" />
            <button id="btn_loadjs">加载JS</button>
        </div>

        <textarea id="txt_a" placeholder="请输入需要运行的代码"></textarea>
        <textarea id="txt_b" placeholder="请输入需要运行的代码"></textarea>
        <textarea id="txt_c" placeholder="请输入需要运行的代码"></textarea>

        <p>
            <input type="text" id="txt_count" placeholder="请输入运行次数(默认100万次)" />
            <button id="btn">RUN</button>
        </p>

        <p id="msg"></p>

        <script type="text/javascript" src="../perf.js"></script>
        <script type="text/javascript">
            //根据id获取元素函数
            function getElById(id) {
                return document.getElementById(id);
            }

            //加载js函数
            function getScript(js, fn) {
                var scriptEl = document.createElement('script');

                scriptEl.type = 'text/javascript';
                js && ( scriptEl.src = js);

                scriptEl.onload = function () {
                    typeof fn === 'function' && fn();
                };

                document.head.appendChild(scriptEl);

                return scriptEl;
            }

            //初始化预设加载库
            var libChkEl = getElById('lib_chk'),
                    msgEl = getElById('msg'),
                    scripts = [],
                    forEach = scripts.forEach,
                    libs = [
                        ['http://soneway.github.io/jq/jq.js', 'http://www.zeptojs.cn/zepto.js', 'https://code.jquery.com/jquery-3.1.0.js']
                    ];

            //预设库html
            libChkEl.innerHTML = libs.map(function (jses, index) {
                return '<div class="chk_item">' +
                        jses.map(function (js) {
                            return '<input id="' + js + '" data-index="' + index + '" data-js="' + js + '" type="radio" name="__radio_' + index + '"/>' +
                                    '<label for="' + js + '">' + js + '</label>';
                        }).join('') +
                        '</div>';
            }).join('');

            //切换预设库
            libChkEl.addEventListener('click', function (evt) {
                var target = evt.target;
                if (target.tagName.toLowerCase() === 'input') {
                    var index = target.getAttribute('data-index'),
                            js = target.getAttribute('data-js'),
                            scriptEl = scripts[index];

                    if (js) {
                        msgEl.innerHTML = 'loading...';

                        //如已加载过script就remove
                        scriptEl && document.head.removeChild(scriptEl);

                        //加载js
                        scripts[index] = getScript(js, function () {
                            msgEl.innerHTML = js + ' 已加载';
                        });
                    }
                }
            }, false);

            //默认点击第一个(加载第一个js)
            forEach.call(libChkEl.querySelectorAll('.chk_item>input:first-of-type'), function (item) {
                item.click();
            });


            //手动加载库
            var btnLoadJsEl = getElById('btn_loadjs'),
                    txtJsEl = getElById('txt_js');

            btnLoadJsEl.addEventListener('click', function () {
                var js = txtJsEl.value;

                if (js) {
                    msgEl.innerHTML = 'loading...';

                    //加载js
                    getScript(js, function () {
                        msgEl.innerHTML = js + ' 已加载';
                    });
                }
            }, false);


            //run代码
            var btnEl = getElById('btn'),
                    aEl = getElById('txt_a'),
                    bEl = getElById('txt_b'),
                    cEl = getElById('txt_c'),
                    countEl = getElById('txt_count');

            btnEl.addEventListener('click', function () {
                msgEl.textContent = 'running...\n';

                setTimeout(function () {
                    var a = aEl.value,
                            b = bEl.value,
                            c = cEl.value,
                            count = countEl.value;

                    a && perf(getFn(a), count, msgEl);
                    b && perf(getFn(b), count, msgEl);
                    c && perf(getFn(c), count, msgEl);
                }, 100);
            }, false);

            function getFn(str) {
                return new Function(str);
            }
        </script>
    </body>
</html>